---
description: Источник истины по геймдизайну — Iron Fist Arena GDD. Все фичи должны соответствовать этому документу.
alwaysApply: true
---

# Iron Fist Arena — Game Design Document (GDD)

**Главный документ по геймдизайну проекта:** `docs/iron_fist_arena_gdd.md`

При реализации и изменении любых игровых систем **обязательно сверяйся с GDD** и не отходи от описанных формул, лимитов и механик.

## Что брать из GDD

- **Бой:** формулы урона (физический/магический), крит, уклонение, броня, статусы, способности классов (Warrior, Rogue, Mage, Tank), лимит 15 ходов, PvP-баланс (рейтинг, анти-стимролл).
- **Прогрессия:** XP за активность, формула уровня, 5 статов за уровень, 1 скиллпоинт каждые 5 уровней, престиж (P1–P10, +2% ко всем статам за престиж).
- **Стамина:** макс 100, реген 1/12 мин, стоимость активностей (PvP 10, подземелья 15–25, босс 40), лимиты рефиллов, анти-абуз.
- **Подземелья:** процедурная генерация, сложности Easy/Normal/Hard, масштабирование по этажам и уровню игрока, луты по редкости и формуле с Luck.
- **PvP Arena:** ELO (K=32, старт 1000), ранги (Bronze–Grandmaster), матчмейкинг, награды за матч и за сезон, анти-чит.
- **Экономика:** золото/гемы, цены в магазине, ремонт (10% от цены), апгрейд (+0…+10, шансы и уничтожение при фейле), крафт.
- **Монетизация:** только convenience и косметика, без P2W; VIP, батл-пасс, лутбоксы только косметика.
- **Техстек и схема БД:** Next.js, Supabase/PostgreSQL, структура таблиц и API из раздела 9 GDD.

## Как использовать

1. Перед реализацией фичи открой `docs/iron_fist_arena_gdd.md` и найди нужный раздел (оглавление в начале файла).
2. Формулы, константы и лимиты копируй из GDD в код без самодельных изменений, если пользователь явно не попросил иное.
3. При расхождении текущего кода с GDD — предлагай приведение к GDD и правишь код под документ.
