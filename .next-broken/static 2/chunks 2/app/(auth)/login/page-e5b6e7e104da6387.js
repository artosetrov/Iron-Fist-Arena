(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{537:function(e,t,s){Promise.resolve().then(s.bind(s,1734))},1734:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(7437),r=s(2265),l=s(9376),n=s(7648),i=s(970);function u(){var e;let[t,s]=(0,r.useState)(""),[u,c]=(0,r.useState)(""),[o,d]=(0,r.useState)(null),[x,m]=(0,r.useState)(!1),h=(0,l.useRouter)(),f=null!==(e=(0,l.useSearchParams)().get("redirect"))&&void 0!==e?e:"/hub",p=async e=>{e.preventDefault(),d(null),m(!0);try{let e=(0,i.e)(),{error:s}=await e.auth.signInWithPassword({email:t,password:u});if(s){d(s.message);return}await fetch("/api/auth/sync-user",{method:"POST"}),h.push(f),h.refresh()}finally{m(!1)}};return(0,a.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"w-full max-w-sm rounded-lg border border-slate-200 bg-white p-6 shadow",children:[(0,a.jsx)("h1",{className:"mb-6 text-xl font-bold",children:"Вход"}),(0,a.jsxs)("form",{onSubmit:p,className:"flex flex-col gap-4",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"text-sm text-slate-600",children:"Email"}),(0,a.jsx)("input",{type:"email",value:t,onChange:e=>s(e.target.value),required:!0,className:"rounded border border-slate-300 px-3 py-2",autoComplete:"email","aria-label":"Email"})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"text-sm text-slate-600",children:"Пароль"}),(0,a.jsx)("input",{type:"password",value:u,onChange:e=>c(e.target.value),required:!0,className:"rounded border border-slate-300 px-3 py-2",autoComplete:"current-password","aria-label":"Пароль"})]}),o&&(0,a.jsx)("p",{className:"text-sm text-red-600",role:"alert",children:o}),(0,a.jsx)("button",{type:"submit",disabled:x,className:"rounded bg-slate-800 px-4 py-2 text-white hover:bg-slate-700 disabled:opacity-50",children:x?"Вход…":"Войти"})]}),(0,a.jsxs)("p",{className:"mt-4 text-center text-sm text-slate-600",children:["Нет аккаунта?"," ",(0,a.jsx)(n.default,{href:"/register",className:"text-slate-800 underline",children:"Регистрация"})]})]})})}},970:function(e,t,s){"use strict";s.d(t,{e:function(){return l}});var a=s(4033),r=s(257);let l=()=>{let e=r.env.NEXT_PUBLIC_SUPABASE_URL,t=r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!t)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY");return(0,a.createBrowserClient)(e,t)}}},function(e){e.O(0,[972,321,971,117,744],function(){return e(e.s=537)}),_N_E=e.O()}]);